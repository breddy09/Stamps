
Then /^[Oo]n WebReg Membership page, set State to Armed Forces Americas$/ do
  #logger.step "On WebReg Membership page, set State to AA Armed Forces Americas"
  registration.profile.membership.state.armed_forces_americas
end

Then /^[Oo]n WebReg Membership page, set State to Armed Forces$/ do
  #logger.step "On WebReg Membership page, set State to AE Armed Forces"
  registration.profile.membership.state.armed_forces
end

Then /^[Oo]n WebReg Membership page, set State to Alaska$/ do
  #logger.step "On WebReg Membership page, set State to Alaska"
  registration.profile.membership.state.alaska
end

Then /^[Oo]n WebReg Membership page, set State to Alabama$/ do
  #logger.step "On WebReg Membership page, set State to AL Alabama"
  registration.profile.membership.state.alabama
end

Then /^[Oo]n WebReg Membership page, set State to Armed Forces Pacific$/ do
  #logger.step "On WebReg Membership page, set State to Armed Forces Pacific"
  registration.profile.membership.state.armed_forces_pacific
end

Then /^[Oo]n WebReg Membership page, set State to Arkansas$/ do
  #logger.step "On WebReg Membership page, set State to Arkansas"
  registration.profile.membership.state.arkansa
end

Then /^[Oo]n WebReg Membership page, set State to American Samoa$/ do
  #logger.step "On WebReg Membership page, set State to American Samoa"
  registration.profile.membership.state.american_samoa
end

Then /^[Oo]n WebReg Membership page, set State to Arizona$/ do
  #logger.step "On WebReg Membership page, set State to Arizona"
  registration.profile.membership.state.arizona
end

Then /^[Oo]n WebReg Membership page, set State to California$/ do
  #logger.step "On WebReg Membership page, set State to California"
  registration.profile.membership.state.california
end

Then /^[Oo]n WebReg Membership page, set State to Colorado$/ do
  #logger.step "On WebReg Membership page, set State to Colorado"
  registration.profile.membership.state.colorado
end

Then /^[Oo]n WebReg Membership page, set State to Connecticut$/ do
  #logger.step "On WebReg Membership page, set State to Connecticut"
  registration.profile.membership.state.connecticut
end

Then /^[Oo]n WebReg Membership page, set State to Canal Zone$/ do
  #logger.step "On WebReg Membership page, set State to Canal Zone"
  registration.profile.membership.state.canal_zone
end

Then /^[Oo]n WebReg Membership page, set State to District of Columbia$/ do
  #logger.step "On WebReg Membership page, set State to District of Columbia"
  registration.profile.membership.state.district_of_columbia
end

Then /^[Oo]n WebReg Membership page, set State to Delaware$/ do
  #logger.step "On WebReg Membership page, set State to Delaware"
  registration.profile.membership.state.delaware
end

Then /^[Oo]n WebReg Membership page, set State to Florida$/ do
  #logger.step "On WebReg Membership page, set State to Florida"
  registration.profile.membership.state.florida
end

Then /^[Oo]n WebReg Membership page, set State to Micronesia$/ do
  #logger.step "On WebReg Membership page, set State to Micronesia"
  registration.profile.membership.state.micronesia
end

Then /^[Oo]n WebReg Membership page, set State to Georgia$/ do
  registration.profile.membership.state.georgia
end

Then /^[Oo]n WebReg Membership page, set State to Guam$/ do
  registration.profile.membership.state.guam
end

Then /^[Oo]n WebReg Membership page, set State to Hawaii$/ do
  registration.profile.membership.state.hawaii
end

Then /^[Oo]n WebReg Membership page, set State to Iowa$/ do
  registration.profile.membership.state.iowa
end

Then /^[Oo]n WebReg Membership page, set State to Idaho$/ do
  registration.profile.membership.state.idaho
end

Then /^[Oo]n WebReg Membership page, set State to Illinois$/ do
  registration.profile.membership.state.illinois
end

Then /^[Oo]n WebReg Membership page, set State to Indiana$/ do
  registration.profile.membership.state.indiana
end

Then /^[Oo]n WebReg Membership page, set State to Kansas$/ do
  registration.profile.membership.state.kansas
end

Then /^[Oo]n WebReg Membership page, set State to Kentucky$/ do
  registration.profile.membership.state.kentucky
end

Then /^[Oo]n WebReg Membership page, set State to Louisiana$/ do
  registration.profile.membership.state.louisiana
end

Then /^[Oo]n WebReg Membership page, set State to Massachusetts$/ do
  registration.profile.membership.state.massachusetts
end

Then /^[Oo]n WebReg Membership page, set State to Maryland$/ do
  registration.profile.membership.state.maryland
end

Then /^[Oo]n WebReg Membership page, set State to Maine$/ do
  registration.profile.membership.state.maine
end

Then /^[Oo]n WebReg Membership page, set State to Marshall Islands$/ do
  registration.profile.membership.state.marshall_islands
end

Then /^[Oo]n WebReg Membership page, set State to Minnesota$/ do
  registration.profile.membership.state.minnesota
end

Then /^[Oo]n WebReg Membership page, set State to Missouri$/ do
  registration.profile.membership.state.missouri
end

Then /^[Oo]n WebReg Membership page, set State to Mariana Islands$/ do
  registration.profile.membership.state.mariana_islands
end

Then /^[Oo]n WebReg Membership page, set State to Mississippi$/ do
  registration.profile.membership.state.mississippi
end

Then /^[Oo]n WebReg Membership page, set State to Montana$/ do
  registration.profile.membership.state.montana
end

Then /^[Oo]n WebReg Membership page, set State to North Carolina$/ do
  registration.profile.membership.state.north_carolina
end

Then /^[Oo]n WebReg Membership page, set State to North Dakota$/ do
  registration.profile.membership.state.north_dakota
end

Then /^[Oo]n WebReg Membership page, set State to Nebraska$/ do
  registration.profile.membership.state.nebraska
end

Then /^[Oo]n WebReg Membership page, set State to New Hampshire$/ do
  registration.profile.membership.state.new_hampshire
end

Then /^[Oo]n WebReg Membership page, set State to New Jersey$/ do
  registration.profile.membership.state.new_jersey
end

Then /^[Oo]n WebReg Membership page, set State to New Mexico$/ do
  registration.profile.membership.state.new_mexico
end

Then /^[Oo]n WebReg Membership page, set State to Nevada$/ do
  registration.profile.membership.state.nevada
end

Then /^[Oo]n WebReg Membership page, set State to New York$/ do
  registration.profile.membership.state.new_york
end

Then /^[Oo]n WebReg Membership page, set State to Ohio$/ do
  registration.profile.membership.state.ohio
end

Then /^[Oo]n WebReg Membership page, set State to Oklahoma$/ do
  registration.profile.membership.state.oklahoma
end

Then /^[Oo]n WebReg Membership page, set State to Oregon$/ do
  registration.profile.membership.state.oregon
end

Then /^[Oo]n WebReg Membership page, set State to Pennsylvania$/ do
  registration.profile.membership.state.pennsylvania
end

Then /^[Oo]n WebReg Membership page, set State to Puerto Rico$/ do
  registration.profile.membership.state.puerto_rico
end

Then /^[Oo]n WebReg Membership page, set State to Palau$/ do
  registration.profile.membership.state.palau
end

Then /^[Oo]n WebReg Membership page, set State to Rhode Island$/ do
  registration.profile.membership.state.rhode_island
end

Then /^[Oo]n WebReg Membership page, set State to South Carolina$/ do
  registration.profile.membership.state.south_carolina
end

Then /^[Oo]n WebReg Membership page, set State to South Dakota$/ do
  registration.profile.membership.state.south_dakota
end

Then /^[Oo]n WebReg Membership page, set State to Tennessee$/ do
  registration.profile.membership.state.tennessee
end

Then /^[Oo]n WebReg Membership page, set State to Texas$/ do
  registration.profile.membership.state.texas
end

Then /^[Oo]n WebReg Membership page, set State to Utah$/ do
  registration.profile.membership.state.utah
end

Then /^[Oo]n WebReg Membership page, set State to Virginia$/ do
  registration.profile.membership.state.virginia
end

Then /^[Oo]n WebReg Membership page, set State to Virgin Islands$/ do
  #logger.step "On WebReg Membership page, set State to Virgin Islands"
  registration.profile.membership.state.virgin_islands
end

Then /^[Oo]n WebReg Membership page, set State to Vermont$/ do
  registration.profile.membership.state.vermont
end

Then /^[Oo]n WebReg Membership page, set State to Washington$/ do
  registration.profile.membership.state.washington
end

Then /^[Oo]n WebReg Membership page, set State to Wisconsin$/ do
  registration.profile.membership.state.wisconsin
end

Then /^[Oo]n WebReg Membership page, set State to West Virginia$/ do
  registration.profile.membership.state.west_virginia
end

Then /^[Oo]n WebReg Membership page, set State to Wyoming$/ do
  registration.profile.membership.state.wyoming
end

Then /^[Oo]n WebReg Membership page, set First Name to (.*)$/ do |var|
  test_parameter[:first_name] = (var.downcase.include? 'random') ? ParameterHelper.random_string : var
  registration.profile.membership.first_name.set test_parameter[:first_name]
end

Then /^[Oo]n WebReg Membership page, set Last Name to (.*)$/ do |var|
  test_parameter[:last_name] = (var.downcase.include? 'random') ? ParameterHelper.random_string : var
  registration.profile.membership.last_name.set test_parameter[:last_name]
end

Then /^[Oo]n WebReg Membership page, set Company to (.*)$/ do |var|
  test_parameter[:company] = (var.downcase.include? 'random') ? ParameterHelper.random_string : var
  registration.profile.membership.company.set test_parameter[:company]
end

Then /^[Oo]n WebReg Membership page, set Address to (.*)$/ do |var|
  test_parameter[:company] = (var.downcase.include? 'random') ? ParameterHelper.random_string : var
  registration.profile.membership.address.set test_parameter[:company]
end

Then /^[Oo]n WebReg Membership page, set City to (.*)$/ do |var|
  test_parameter[:membership] = var
  registration.profile.membership.city.set test_parameter[:membership]
end

Then /^[Oo]n WebReg Membership page, set Zip Code to (.*)$/ do |var|
  test_parameter[:zip] = var
  registration.profile.membership.zip.set test_parameter[:zip]
end

Then /^[Oo]n WebReg Membership page, set Phone to (.*)$/ do |var|
  test_parameter[:phone] = (var.downcase.include? 'random') ? ParameterHelper.random_phone : var
  phone = registration.profile.membership.phone
  6.times do
    phone.send_keys test_parameter[:phone]
    sleep(0.35)
    ui_phone = phone.text
    sleep(0.35)
    break if ui_phone.include? '-' and (test_parameter[:phone][-4, 4] == ui_phone[-4, 4])
  end
end

Then /^[Oo]n WebReg Membership page, set Extenion to (.*)$/ do |var|
  #logger.step "On WebReg Membership page, set Extenion to #{var}"
  test_parameter[:ext] = (var.downcase.include? 'random') ? ParameterHelper.random_phone_extension : var
  registration.profile.membership.ext.set test_parameter[:ext]
end

Then /^[Oo]n WebReg Membership page, set Cardholder name to (.*)$/ do |var|
  #logger.step "On WebReg Membership page, set Cardholder name to #{var}"
  test_parameter[:card_holder_name] = (var.downcase.include? 'random') ? ParameterHelper.random_name : var
  registration.profile.membership.card_holder_name.set test_parameter[:card_holder_name]
end

Then /^[Oo]n WebReg Membership page, set Card number to (.*)$/ do |var|
  test_parameter[:card_number] = var
  #logger.step "On WebReg Membership page, set Card number to #{test_data[:card_number]}"
  registration.profile.membership.card_number.set test_parameter[:card_number]
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to January/ do
  #logger.step "On WebReg Membership page, set Expiration Month to January"
  registration.profile.membership.expiration_month.jan
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to February$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to February"
  registration.profile.membership.expiration_month.feb
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to March$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to March"
  registration.profile.membership.expiration_month.mar
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to April$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to April"
  registration.profile.membership.expiration_month.apr
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to May$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to May"
  registration.profile.membership.expiration_month.may
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to June$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to June"
  registration.profile.membership.expiration_month.jun
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to July$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to July"
  registration.profile.membership.expiration_month.jul
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to August$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to August"
  registration.profile.membership.expiration_month.aug
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to September$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to September"
  registration.profile.membership.expiration_month.sep
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to October$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to October"
  registration.profile.membership.expiration_month.oct
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to November$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to November"
  registration.profile.membership.expiration_month.nov
end

Then /^[Oo]n WebReg Membership page, set Expiration Month to December$/ do
  #logger.step "On WebReg Membership page, set Expiration Month to December"
  registration.profile.membership.expiration_month.dec
end

Then /^[Oo]n WebReg Membership page, set Expiration Year to (\d+)$/ do |var|
  #logger.step "On WebReg Membership page, set Expiration Year to #{var}"
  test_parameter[:expiration_year] = var
  registration.profile.membership.expiration_year.select test_parameter[:expiration_year]
end

Then /^[Oo]n WebReg Membership page, set Billing address same as mailing address to Checked$/ do
  #logger.step "On WebReg Membership page, set Billing address same as mailing address to Checked"
  registration.profile.membership.billing_same_as_mailing.check
end

Then /^[Oo]n WebReg Membership page, set Billing address same as mailing address to Unchecked$/ do
  #logger.step "On WebReg Membership page, set Billing address same as mailing address to Unchecked"
  registration.profile.membership.billing_same_as_mailing.uncheck
end

Then /^[Oo]n WebReg Membership page, set Terms & Conditions to Checked$/ do
  #logger.step "On WebReg Membership page, set Terms & Conditions to Checked"
  registration.profile.membership.terms_and_conditions.check
end

Then /^[Oo]n WebReg Membership page, set Terms & Conditions to Unchecked$/ do
  #logger.step "On WebReg Membership page, set Terms & Conditions to Unchecked"
  registration.profile.membership.terms_and_conditions.uncheck
end

Then /^[Oo]n WebReg Membership page, click Back Button$/ do
  #logger.step "On WebReg Membership page, click Back Button"
  expect("").to eql "Step Definition not yet implemented! - On WebReg Membership page, click Back Button"
end

Then /^[Oo]n WebReg Membership page, click Submit$/ do
  #logger.step "On WebReg Membership page, click Submit"
  begin
    registration.profile.membership.submit_correct_errors test_parameter
  rescue Exception => e
    logger.error e.message
    logger.error e.backtrace.join("\n")
  end
end

Then /^[Oo]n WebReg Membership page, click Submit and correct errors$/ do
  step "On WebReg Membership page, click Submit"
  10.times do
    case @webreg_result
      #when there's a failure, correct field and resubmit.
      when WebReg::MembershipPhone
        logger.error "Membership Phone Textbox has error: #{@webreg_result.help_text}"
        step "On WebReg Membership page, set Phone to random"
        step "On WebReg Membership page, click Submit"
      when WebReg::MembershipCardNumber
        logger.error "Membership Phone Textbox has error: #{@webreg_result.help_text}"
        step "On WebReg Membership page, set Card number to #{test_parameter[:card_number]}"
        step "On WebReg Membership page, click Submit"
      when WebReg::ChooseSupplies
        break
      else
        raise "Unknown WebReg Result object. #{@webreg_result.class} is not recognized. Update step \"On WebReg Membership page, click Submit and correct errors\""
    end
  end
end

Then(/^[Oo]n WebReg Membership page, expect First Name Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect First Name Help Block is #{expectation}"
  help_text = registration.profile.membership.first_name.help_text
  expect(help_text).to eql expectation
  end

Then(/^[Oo]n WebReg Membership page, expect Last Name Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect Last Name Help Block is #{expectation}"
  help_text = registration.profile.membership.last_name.help_text
  expect(help_text).to eql expectation
  end

Then(/^[Oo]n WebReg Membership page, expect Address Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect Address Help Block is #{expectation}"
  help_text = registration.profile.membership.address.help_text
  expect(help_text).to eql expectation
  end

Then(/^[Oo]n WebReg Membership page, expect City Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect City Help Block is #{expectation}"
  help_text = registration.profile.membership.city.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect State Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect State Help Block is #{expectation}"
  help_text = registration.profile.membership.state.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Phone Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect Phone Help Block is #{expectation}"
  help_text = registration.profile.membership.phone.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Cardhoder name Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect Cardholder name Help Block is #{expectation}"
  help_text = registration.profile.membership.card_holder_name.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Card number Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, expect Card number Help Block is #{expectation}"
  help_text = registration.profile.membership.card_number.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, Expires Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, Expires Help Block is #{expectation}"
  help_text = registration.profile.membership.expiration_month.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Billing Address Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, Billing Address Help Block is #{expectation}"
  help_text = registration.profile.membership.billing_address.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Billing City Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, Billing City Help Block is #{expectation}"
  help_text = registration.profile.membership.billing_city.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Billing State Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, Billing State Help Block is #{expectation}"
  help_text = registration.profile.membership.billing_state.help_text
  expect(help_text).to eql expectation
end


Then(/^[Oo]n WebReg Membership page, expect Billing Zip Help Block is (.*)$/) do |expectation|
 #logger.step "On WebReg Membership page, Billing Zip Help Block is #{expectation}"
  help_text = registration.profile.membership.billing_zip.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, expect Terms & Conditions Help Block is (.*)$/) do |expectation|
  #logger.step "On WebReg Membership page, Terms & Conditions Help Block is #{expectation}"
  help_text = registration.profile.membership.terms_and_conditions.help_text
  expect(help_text).to eql expectation
end

Then(/^[Oo]n WebReg Membership page, Tab$/) do
  #logger.step "On WebReg Membership page, Tab"
  registration.profile.membership.tab
end





